---
lab: 3
title: '演習 4: 秘密度ラベル'
---

# ラボ 3 - 演習 4 - 秘密度ラベル

Contoso Ltd. は Tailwind Traders を買収している最中です。 経営陣は、データ漏洩のリスクを最小限に抑えるために、このプロセスでのすべてのドキュメントを厳密に機密として扱うことを決定しました。

ラベルの安全性に関して次の要件が与えられました。

- コンテンツは、Contoso Ltd の内部従業員とのみ共有できる。
- コンテンツは暗号化する必要がある。
- ファイルやメールは転送できない。
- 個人のデバイスからのコンテンツへのアクセスは禁止されている。
- このラベルのスコープは管理である。

## パート 1: ソリューションを設計する (必須)

このタスクでは、Contoso Ltd. が直面している問題に対処するための概念を設計します。

### 設計アプローチ

Contoso には、社内データを保護するための複数のソリューションが整備されています。 最初のアプローチは、現在のセットアップを分析し、それらが現在の要件を満たしているかどうかを判断することです。 

上記のシナリオに基づいて、Microsoft Purview 情報保護を使用して要件を満たし、データを適切に保護できます。 Microsoft Purview 情報保護の秘密度ラベルを使用すると、組織のデータを分類し保護しながら、シームレスなユーザー生産性およびコラボレーション機能を引き続きスムーズに活用することができます。 

### 提案されるソリューション

|要件|解決策|行動計画|
|----|----|----|
|ドキュメントとメールを暗号化する|Microsoft Purview Information Protection|秘密度ラベルをデプロイする|
|アンマネージド デバイスからのデータへのアクセスを制限する|Microsoft Purview Information Protection|秘密度ラベルをデプロイする|
|アクセスを内部ユーザーのみに制限する|Microsoft Purview Information Protection|秘密度ラベルをデプロイする

## パート 2: ソリューションを実施する (オプション)

### タスク 1: 既存の秘密度ラベルを調査する

このタスクでは、既存の秘密度ラベルを調査し、新しいラベルを作成する必要があるかどうかを決定します。

>[!NOTE] Exchange Online PowerShell モジュールが既にインストールされているはずです。 モジュールが見つからない場合は、モジュールをインストールする手順に従ってください。

1. マウスの右ボタンで Windows ボタンを選択して昇格された PowerShell ウィンドウを開き、 **[Windows PowerShell (管理者)]** を選択します。
1. **[ユーザー アカウント制御]** ウィンドウで、**[はい]** を選択して確定します。
1. 次のコマンドレットを入力して、Exchange Online PowerShell モジュールの最新版をインストールします。

    ```powershell
    Install-Module ExchangeOnlineManagement
    ```
1. 信頼されていないレポジトリ セキュリティ ダイアログで、[はい] を示す **[Y]** を選択して確定し、**Enter** キーを押します。  この処理は、完了までに時間がかかる場合があります。
1. 次のコマンドレットを入力して、Security & Compliance PowerShell に接続します。

    ```powershell
    Connect-IPPSSession
    ```
1. **[サインイン]** ウィンドウが表示されたら、`admin@WWLxZZZZZZ.onmicrosoft.com` としてサインインし (ZZZZZZ はラボ ホスティング プロバイダーから提供された一意のテナント ID)、テナントの管理パスワードを使用します。
1. 次のコマンドレットを入力して、展開されたすべての秘密度ラベルの一覧を取得します

    ```powershell
    Get-Label | Format-Table -wrap ParentLabelDisplay,DisplayName,LabelActions
    ```
このコマンドレットは、展開されたすべての秘密度ラベルとそれに対応するアクションを表示します。 ラベルを調べます。 既存のラベルがビジネス要件を満たしているかどうか、または新しいラベル付けが必要かどうかを決定します。 完了したら、次のタスクに進みます。

### タスク 2: グループとサイトの秘密度ラベルのサポートを有効にする

前のタスクでは、既存のラベルを確認し、現在の既存のラベルが会社のビジネス要件を満たしていないという結論に達しました。 グループとサイトに秘密度ラベルを適用するには、PowerShell で秘密度ラベルのサポートを有効にする必要があります。

1. マウスの右ボタンでスタート メニューを選択して管理者特権で PowerShell ウィンドウを開き、Windows PowerShell を選択して管理者として実行します。
1. [ユーザー アカウント制御] ウィンドウで [はい] をクリックして確認し、Enter キーを押します。
1. まず、Microsoft Graph PowerShell SDK をインストールする必要があります。 Microsoft.Graph と Microsoft.Graph.Beta の 2 つのモジュールが含まれるため、両方をインストールする必要があります。 次のコマンドレットを入力して、最新の Microsoft.Graph をインストールします。

```powershell
Install-Module Microsoft.Graph -Scope CurrentUser
```
1. NuGet セキュリティ ダイアログと信頼されていないレポジトリ セキュリティ ダイアログを Y (はい) で確認し、Enter キーを押します。 この処理が完了するまでしばらく時間がかかる場合があります。
1. Microsoft.Graph.Beta をインストールするには、次のコマンドレットを入力します。

```powershell
Install-Module Microsoft.Graph.Beta -Scope CurrentUser
```
1. [ユーザー アカウント制御] ウィンドウで [はい] をクリックして確認し、Enter キーを押します。
1. テナントに接続します。

```powershell
Connect-MgGraph -Scopes "Directory.ReadWrite.All"
```

1. [Sign into your account] (アカウントにサインイン) フォームで、admin@WWLxZZZZZZ.onmicrosoft.com としてサインインします (ZZZZZZ はラボ ホスティング プロバイダーから提供された一意のテナント ID)。 パスワードは、ラボ ホスティング プロバイダーから支給されます。
1. **[要求されたアクセス許可]** ウィンドウで、**[組織の代理として同意する]**、**[同意する]** の順に選択します。 サインイン後、PowerShell ウィンドウを選択します。
1. 次のコマンドレットを入力して、秘密度ラベルのサポートを有効にします。

```powershell
$params = @{
     Values = @(
        @{
            Name = "EnableMIPLabels"
            Value = "True"
        }
     )
}

Update-MgBetaDirectorySetting -DirectorySettingId $grpUnifiedSetting.Id -BodyParameter $params
```

1. PowerShell ウィンドウを閉じます。

これで、グループおよびサイトでの秘密度ラベルのサポートが有効になりました。

### タスク 3: 高セキュリティの秘密度ラベルを作成して展開する

要件を満たすために新しい秘密度ラベルを作成します。

1. 管理者アカウント **MOD 管理者**を使用して、Allan Deyoung として Microsoft Purview コンプライアンス ポータル **https://compliance.microsoft.com/** にサインインします。
1. Microsoft Purview ポータルの左ナビゲーション ペインで、**[情報の保護]** を展開してから、**[ラベル]** を選択します。
1. **[ラベル]** ページで **[+ ラベルの作成]** を選択します。
1. **[このラベルの基本的な詳細を指定します]** ページで、次の情報を入力します。

    - **名前**: 社外秘 - 取得プロセス
    - **表示名**: 社外秘 - 取得プロセス
    - **ユーザーの説明**: 取得プロセスに関連する機密性の高いデータ。
    - **管理者の説明**: このラベルは、Contoso の任意の取得に関連するすべてのデータに対する保護を提供します。

1. [**次へ**] を選択します。
1. **[このラベルのスコープを定義]** ページで、**[アイテム]** を選択し、**[ファイル]**、**[メール]**、**[グループとサイト]** を選択します。 このページでその他のオプションが選択されている場合は、それらのオプションの選択を解除します。
1. **[ラベル付きのアイテムの保護設定を選択する]** ページで、 **[Apply or remove encryption] (暗号化の適用または削除)** を選択します。
1. **[暗号化]** ページで、**[暗号化設定の構成]** を選択します。
1. 暗号化設定に次の情報を入力します。 
    - **アクセス許可を今すぐ割り当てますか、それともユーザーが決定するようにしますか?**: ユーザーがラベルを適用するときにアクセス許可を割り当てることができます。
    - **Outlook で、次のいずれかの制限を適用します**: 転送不可。
1. **[Word、PowerPoint、Excel で、ユーザーにアクセス許可の指定を求める]** を選択して、**[次へ]** を選択します。
1. **[ファイルと電子メールの自動ラベル付け]** ページで、**[次へ]** をクリックします。
1. **[グループとサイトの保護の設定]** ページで、**[プライバシーと外部ユーザー アクセス]** と **[External sharing and Conditional Access]\(外部共有と条件付きアクセス\)** を選択し、**[次へ]** を選択します。
1. **[データのプライバシーと外部ユーザー アクセスの設定]** ページで、**[プライベート]** を選択し、**[次へ]** を選択します。
1. **[外部共有と条件付きアクセスの設定を定義する]** ページで、**[ラベル付きの SharePoint サイトからの外部共有を制御する]** と **[ラベル付き SharePoint サイトを保護するために Microsoft Entra 条件付きアクセスを使用] **を選択して、構成を次のように設定します。
    - **コンテンツを共有できる相手**: 組織内のユーザーのみ
    - **ユーザーが管理されていないデバイスから SharePoint サイトにアクセスできるかどうかを判断する**: アクセスをブロックする
1. [**次へ**] を選択します。
1. **[Auto-labeling for schematized data assets (preview)] (スキーマ化されたデータ アセットの自動ラベル付け (プレビュー))** ページで、**[次へ]** を選択します。
1. **[設定の確認と終了]** ページで、**[ラベルの作成]** を選択します。
1. **[秘密度ラベルが作成されました]** ページで、次の手順として、**[ユーザーのアプリにラベルを発行する]** を選択します。
1. **完了** を選択します。
1. **[ラベルの発行]** ページで、**[新しいラベル ポリシーの作成]** を選択します。
1. **[発行する秘密度ラベルの選択]** ページで、先ほど作成したラベルを選択し、**[次へ]** を選択します。
1. [**管理単位の割り当て**] ページで、[**次へ**] を選択します。
1. **[ユーザーとグループに対する公開]** ページで、**[ユーザーとグループ] ** を選択し、**[編集]** を選択します。
1. **[ユーザーとグループのスコープ]** ページで、**[特定のユーザーとグループ]** を選択し、**[+ ユーザーとグループを含める]** を選択し、ユーザーの割り当てが完了するまで、**[エグゼクティブ]** と **[リーダーシップ]** を選択し、**[完了]** を選択します。
1. [**次へ**] を選択します。
1. **[ポリシーの設定]** ページで、**[ユーザーは、ラベルを削除したり、ラベルの分類を下位のものにしたりする場合に、理由を示す必要がある]** と **[Require users to apply a label to their emails and documents]\(ユーザーがメールとドキュメントにラベルを適用することを必須にする\)** を選択します。
1. [**次へ**] を選択します。
1. **[ドキュメントの既定の設定]** ページで、**[Email が添付ファイルから最も優先度の高いラベルを継承する]** を選択し、**[次へ]** を選択します。
1. **[Default settings for meetings and calendar events] (会議とカレンダー イベントの既定の設定)** ページで、**[次へ]** を選択します。
1. **[グループとサイトの既定の設定]** ページで、**[次へ]** を選択します。
1. **[Fabric と Power BI コンテンツの既定の設定]** ページで、**[次へ]** を選択します。
1. **[ポリシーの名前を設定する]** ページで、次の情報を入力します。
    - **名前**: 管理秘密度ラベル ポリシー
    - **説明**: このポリシーは、企業の買収に関連して保護するように管理するために設計されています
1. [**次へ**] を選択します。
1. **[確認と完了]** ページで、**[送信]** を選択します。

秘密度ラベルが正常に作成され、公開されました。